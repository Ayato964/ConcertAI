# MORTM Melody Generator

ピアノロールベースのメロディ生成Webアプリケーション

## 🚀 クイックスタート

### 方法1: ダブルクリックで起動（Windows）
1. `start-dev.bat` をダブルクリック
2. ブラウザで `http://localhost:8000` にアクセス

### 方法2: コマンドラインで起動
```bash
# Windows
python -m http.server 8000

# Linux/Mac
python3 -m http.server 8000

# または
./start-dev.sh
```

### 方法3: Node.js環境（自動リロード付き）
```bash
# 初回のみ
npm install

# 開発サーバー起動（ファイル変更時に自動リロード）
npm run dev-live
```

## 🛠️ 開発環境

### 必要な環境
- Python 3.x
- 仮想環境（推奨）: `.venv`

### ファイル構成
```
MORTM_HOME/
├── index.html          # メインHTMLファイル
├── style.css           # スタイルシート
├── script.js           # メインJavaScript
├── jsmidgen.js         # MIDI生成ライブラリ
├── start-dev.bat       # Windows起動スクリプト
├── start-dev.sh        # Linux/Mac起動スクリプト
└── package.json        # Node.js設定
```

## 🎹 使用方法

1. **モデル選択**: ヘッダーから生成モデルを選択
2. **入力MIDI選択**: サンプルまたはアップロードしたMIDIファイルを選択
3. **ピアノロール編集**: クリックでノートの追加/削除
4. **小節選択**: Ctrl+クリックで生成対象小節を選択
5. **生成**: 「✨ 生成」ボタンでメロディを生成
6. **再生**: 「▶ 再生」ボタンで音声再生

## 🔧 デバッグ

### ブラウザ開発者ツール
- F12 キーで開発者ツールを開く
- Console タブでログを確認
- Sources タブでブレークポイントを設定

### 便利なショートカット
- `Ctrl+Shift+I`: 開発者ツールを開く
- `F5`: ページをリロード
- `Ctrl+F5`: キャッシュをクリアしてリロード

## 📝 ログ機能

アプリケーション下部のログエリアで以下の情報を確認できます：
- ファイル読み込み状況
- ノートの追加/削除
- 生成プロセス
- エラーメッセージ

## 🎵 機能

- **ピアノロール編集**: 128音階のフルレンジ対応
- **リアルタイム再生**: Tone.jsによる高品質音声合成
- **MIDI入出力**: ファイルの読み込みとダウンロード
- **複数解像度**: 1/4から1/64まで対応
- **楽器選択**: ピアノ・サックス音色
- **候補生成**: 複数の生成結果を比較

## 🐛 トラブルシューティング

### サーバーが起動しない場合
```bash
# ポート8000が使用中の場合
python -m http.server 8001

# または
netstat -ano | findstr :8000  # Windows
lsof -i :8000                 # Linux/Mac
```

### 音が鳴らない場合
- ブラウザの音声許可を確認
- 開発者ツールのConsoleでエラーを確認
- 別のブラウザで試す

### ファイルが読み込めない場合
- ファイルパスを確認
- ブラウザのキャッシュをクリア
- 開発者ツールのNetworkタブで確認
